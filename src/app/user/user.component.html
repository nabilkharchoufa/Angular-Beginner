<div class="card">
  <div class="card-header">
    Inscription
  </div>

  <div class="card-body">
    <form novalidate (ngSubmit)="save()" [formGroup]="userForm">

      <div class="form-group row mb-2">
        <label class="col-md-2 col-form-label" for="firstNameId">Prénom</label>
        <div class="col-md-8">
          <input class="form-control" id="firstNameId" type="text" placeholder="Prénom (obligatoire)"
            formControlName="firstName"
            [ngClass]="{'is-invalid': (userForm.get('firstName').touched || userForm.get('firstName').dirty) && !userForm.get('firstName').valid }" />
          <span class="invalid-feedback">
            <span *ngIf="userForm.get('firstName').errors?.required">
              Le prénom est obligatoir.
            </span>
            <span *ngIf="userForm.get('firstName').errors?.minlength">
              le prénom doit contenir au minimum 3 caractères.
            </span>
          </span>
        </div>
      </div>

      <div class="form-group row mb-2">
        <label class="col-md-2 col-form-label" for="lastNameId">Nom</label>
        <div class="col-md-8">
          <input class="form-control" id="lastNameId" type="text" placeholder="Nom (obligatoire)" required
            formControlName="lastName" maxlength="50"
            [ngClass]="{'is-invalid': (userForm.get('lastName').touched || userForm.get('lastName').dirty) && !userForm.get('lastName').valid }" />
          <span class="invalid-feedback">
            <span *ngIf="userForm.get('lastName').errors?.required">
              Le nom est obligatoir.
            </span>
            <span *ngIf="userForm.get('lastName').errors?.maxlength">
              le nom doit contenir au maximum 50 caractères.
            </span>
          </span>
        </div>
      </div>

      <div class="form-group row mb-2">
        <label class="col-md-2 col-form-label" for="emailId">Email</label>
        <div class="col-md-8">
          <input class="form-control" id="emailId" type="email" placeholder="Email (required)" required email
            formControlName="email"
            [ngClass]="{'is-invalid': (userForm.get('email').touched || userForm.get('email').dirty) && !userForm.get('email').valid }" />
          <span class="invalid-feedback">
            <span *ngIf="userForm.get('email').errors?.required">
              Merci de saisir une adresse mail.
            </span>
            <span *ngIf="userForm.get('email').errors?.email">
              Merci de saisir une adresse mail valid.
            </span>
          </span>
        </div>
      </div>

      <div class="form-group row mb-2">
        <label class="col-md-2 col-form-label" for="phoneId">Téléphone</label>
        <div class="col-md-8">
          <input class="form-control" id="phoneId" type="tel" placeholder="Phone" formControlName="phone"
            [ngClass]="{'is-invalid': !userForm.get('phone').valid }" />
          <span class="invalid-feedback">
            <span *ngIf="userForm.get('phone').errors?.required">
              Merci de saisir un numéro de téléphone.
            </span>
          </span>
        </div>
      </div>

      <div class="form-group row mb-2">
        <label class="col-md-2 col-form-label" for="ageId">Age</label>
        <div class="col-md-8">
          <input class="form-control" id="ageId" placeholder="Age" formControlName="age" type="number"
            [ngClass]="{'is-invalid': !userForm.get('age').valid }" />
          <span class="invalid-feedback">
            <span *ngIf="userForm.get('age').errors">
              Valeur possible entre 18 et 150.
            </span>
          </span>
        </div>
      </div>

      <div class="form-group row mb-2">
        <label class="col-md-2 col-form-label pt-0">S'authentifier avec</label>
        <div class="col-md-8">
          <div class="form-check form-check-inline">
            <label class="form-check-label">
              <input class="form-check-input" type="radio" value="email" formControlName="choiceAuth"
                (click)="authBy('email')"> email
            </label>
          </div>
          <div class="form-check form-check-inline">
            <label class="form-check-label">
              <input class="form-check-input" type="radio" value="text" formControlName="choiceAuth"
                (click)="authBy('phone')"> Telephone
            </label>
          </div>
        </div>
      </div>

      <div class="form-group row mb-2">
        <div class="col-md-8">
          <div class="form-check">
            <label class="form-check-label">
              <input class="form-check-input" id="sendCatalogId" type="checkbox" formControlName="sendCatalogue">
              Envoyer moi le catalogue
            </label>
          </div>
        </div>
      </div>

      <!-- <div *ngIf="user.sendCatalog">
        <div class="form-group row mb-2">
          <label class="col-md-2 col-form-label pt-0">Type d'adresse</label>
          <div class="col-md-8">
            <div class="form-check form-check-inline">
              <label class="form-check-label">
                <input class="form-check-input" id="addressType1Id" type="radio" value="home"
                  [(ngModel)]="user.addressType" name="addressType"> Domicile
              </label>
            </div>
            <div class="form-check form-check-inline">
              <label class="form-check-label">
                <input class="form-check-input" id="addressType1Id" type="radio" value="work"
                  [(ngModel)]="user.addressType" name="addressType"> Travail
              </label>
            </div>
            <div class="form-check form-check-inline">
              <label class="form-check-label">
                <input class="form-check-input" id="addressType1Id" type="radio" value="other"
                  [(ngModel)]="user.addressType" name="addressType"> Autre
              </label>
            </div>
          </div>
        </div>

        <div class="form-group row mb-2">
          <label class="col-md-2 col-form-label" for="street1Id">Address</label>
          <div class="col-md-8">
            <input class="form-control" id="street1Id" type="text" placeholder="Adresse" [(ngModel)]="user.street1"
              name="street1">
          </div>
        </div>

        <div class="form-group row mb-2">
          <label class="col-md-2 col-form-label" for="street2Id">Complément d'address</label>
          <div class="col-md-8">
            <input class="form-control" id="street2Id" type="text" placeholder="Complément d'address"
              [(ngModel)]="user.street2" name="street2">
          </div>
        </div>

        <div class="form-group row mb-2">
          <label class="col-md-2 col-form-label" for="cityId">Ville, Régions, Code postale</label>
          <div class="col-md-3">
            <input class="form-control" id="cityId" type="text" placeholder="ville" [(ngModel)]="user.city" name="city">
          </div>
          <div class="col-md-3">
            <select class="form-control" id="stateId" [(ngModel)]="user.state" name="state">
              <option value="" disabled selected hidden>Selectionner une région...</option>
              <option value="Al">Alsace, Champagne-Ardenne et Lorraine</option>
              <option value="Aq">Aquitaine, Limousin et Poitou-Charentes</option>
              <option value="Au">Auvergne et Rhône-Alpes</option>
              <option value="Bo">Bourgogne et Franche Comté</option>
              <option value="La">Languedoc-Roussillon et Midi-Pyrénées</option>
              <option value="No">Nord-Pas-de-Calais et Picardie</option>
              <option value="Ba">Basse-Normandie et Haute-Normandie</option>
            </select>
          </div>
          <div class="col-md-2">
            <input class="form-control" id="zipId" type="number" placeholder="Code postale" [(ngModel)]="user.zip"
              name="zip">
          </div>
        </div>
      </div> -->

      <div class="form-group row">
        <button class="btn btn-primary mr-1" type="submit" style="width:160px"
          [title]="userForm.valid ? 'Enregistrer vos données' : 'Merci de corriger les erreurs pour pouvoir enregistrer '"
          [disabled]="!userForm.valid">
          Enregistrer
        </button>
        <button class="btn btn-light mr-1" style="width:160px" (click)="setData()">
          initialiser
        </button>
      </div>
    </form>
  </div>
</div>
<br>Dirty: {{ userForm.dirty }}
<br>Touched: {{ userForm.touched }}
<br>Valid: {{ userForm.valid }}
<br>Value: {{ userForm.value | json }}